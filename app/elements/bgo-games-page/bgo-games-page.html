<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../bower_components/iron-list/iron-list.html">

<link rel="import" href="../../bower_components/paper-card/paper-card.html">

<link rel="import" href="../../bower_components/firebase-element/firebase-collection.html">

<link rel="import" href="../bgo-game-item/bgo-game-item.html">

<dom-module id="bgo-games-page">
  <template>
    <style>
      :host {
        @apply(--layout-vertical);
        @apply(--layout-flex);
      }
      iron-list {
        @apply(--layout-flex);
      }
    </style>
    <firebase-collection
      log
      location='[[_gamesLocation]]'
      data='{{_games}}'>
    </firebase-collection>
    <h1>Game list: </h1>
    <iron-list
      items='{{_games}}'
      as='game'>
      <template>
        <div>[[game.name]]</div>
      </template>
    </iron-list>
  </template>
  <script>
  (function() {
    'use strict';

    Polymer({
      is: 'bgo-games-page',

      properties: {
        _gamesLocation: {
          type: String
        },
        _games: {
          type: Array,
          value: function() { return []; }
        }
      },
      observers: [
        '_dataChanged1(_games.splices)',
        '_dataChanged2(_games.*)'
      ],

      attached: function() {
        this._gamesLocation = bgoApp.firebaseUrl + '/games';
      },

      _dataChanged1: function() {
        console.log('Games data 1: ' + this._games);
      },
      _dataChanged2: function() {
        console.log('Games data 2: ' + this._games);
      }
    });
  })();
  </script>
</dom-module>
